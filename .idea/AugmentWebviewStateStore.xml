<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="AugmentWebviewStateStore">
    <option name="stateMap">
      <map>
        <entry key="CHAT_STATE" value="{&quot;currentConversationId&quot;:&quot;9b86f14a-f8b4-4010-9427-ba44e62da0ad&quot;,&quot;agentExecutionMode&quot;:&quot;manual&quot;,&quot;isPanelCollapsed&quot;:true,&quot;displayedAnnouncements&quot;:[],&quot;conversations&quot;:{&quot;9b86f14a-f8b4-4010-9427-ba44e62da0ad&quot;:{&quot;id&quot;:&quot;9b86f14a-f8b4-4010-9427-ba44e62da0ad&quot;,&quot;createdAtIso&quot;:&quot;2025-09-14T17:23:55.257Z&quot;,&quot;lastInteractedAtIso&quot;:&quot;2025-09-14T17:41:04.843Z&quot;,&quot;chatHistory&quot;:[{&quot;chatItemType&quot;:&quot;exchange-pointer&quot;,&quot;exchangeUuid&quot;:&quot;bdd90f22-32c6-48ed-9f49-399040ddfdf2&quot;,&quot;timestamp&quot;:&quot;2025-09-14T17:38:44.183Z&quot;,&quot;request_message&quot;:&quot;We need to implement automatic premium plan enrollment for new users during our launch period. Here are the specific requirements:\n\n**Objective**: Modify the `registerAction` method in `/src/app/registration/registration-form-actions.ts` to automatically enroll new users in the premium plan.\n\n**Implementation Details**:\n1. **Location**: Add the enrollment logic in `registerAction` after the user is successfully saved to the database and the email verification is sent\n2. **Reference Implementation**: Use the `enrollInSubscriptionPlan` function from `/src/app/account/billing/billing.actions.ts` as a reference for creating subscription plan enrollments\n3. **Key Difference**: Skip the billing information validation that exists in the reference implementation since this premium subscription will be free during launch\n4. **Database Record**: Create a `subscriptionPlanEnrollments` entry for the new user with:\n   - The premium plan ID\n   - An `endsAt` date set far in the future (e.g., year 2500) to represent lifetime access\n   - Current timestamp for `startsAt`\n\n**Feature Flag Implementation**:\n- Add conditional logic controlled by environment variable `AUTO_ENROLL_PREMIUM`\n- Only execute the auto-enrollment when `AUTO_ENROLL_PREMIUM` is set to `\&quot;true\&quot;`\n- Ensure the registration process continues normally regardless of the flag value\n\n**Error Handling**: Ensure that any failures in the auto-enrollment process don't break the user registration flow.\n\nPlease analyze the existing code structure, implement the feature flag logic, and add the premium enrollment functionality while maintaining the existing registration workflow.&quot;,&quot;status&quot;:&quot;success&quot;,&quot;seen_state&quot;:&quot;unseen&quot;},{&quot;chatItemType&quot;:&quot;exchange-pointer&quot;,&quot;exchangeUuid&quot;:&quot;160bc317-37e4-4904-bc55-76c5e17352d2&quot;,&quot;timestamp&quot;:&quot;2025-09-14T17:39:08.603Z&quot;,&quot;request_message&quot;:&quot;&quot;,&quot;status&quot;:&quot;success&quot;,&quot;seen_state&quot;:&quot;unseen&quot;},{&quot;chatItemType&quot;:&quot;exchange-pointer&quot;,&quot;exchangeUuid&quot;:&quot;c8288258-a6d2-4121-9915-768471a407eb&quot;,&quot;timestamp&quot;:&quot;2025-09-14T17:39:25.640Z&quot;,&quot;request_message&quot;:&quot;&quot;,&quot;status&quot;:&quot;success&quot;,&quot;seen_state&quot;:&quot;unseen&quot;},{&quot;chatItemType&quot;:&quot;exchange-pointer&quot;,&quot;exchangeUuid&quot;:&quot;ede8f3c2-af8d-4547-a39a-06f5e48d112b&quot;,&quot;timestamp&quot;:&quot;2025-09-14T17:39:38.714Z&quot;,&quot;request_message&quot;:&quot;&quot;,&quot;status&quot;:&quot;success&quot;,&quot;seen_state&quot;:&quot;unseen&quot;},{&quot;chatItemType&quot;:&quot;exchange-pointer&quot;,&quot;exchangeUuid&quot;:&quot;7c622499-e994-4845-9644-2837c6c4877f&quot;,&quot;timestamp&quot;:&quot;2025-09-14T17:39:52.027Z&quot;,&quot;request_message&quot;:&quot;&quot;,&quot;status&quot;:&quot;success&quot;,&quot;seen_state&quot;:&quot;unseen&quot;},{&quot;chatItemType&quot;:&quot;exchange-pointer&quot;,&quot;exchangeUuid&quot;:&quot;0e4202e9-28a2-4797-b4b8-a869c6a0b0e4&quot;,&quot;timestamp&quot;:&quot;2025-09-14T17:40:08.197Z&quot;,&quot;request_message&quot;:&quot;&quot;,&quot;status&quot;:&quot;success&quot;,&quot;seen_state&quot;:&quot;unseen&quot;},{&quot;chatItemType&quot;:&quot;exchange-pointer&quot;,&quot;exchangeUuid&quot;:&quot;d8df03ae-fb05-49b4-a520-66f883087849&quot;,&quot;timestamp&quot;:&quot;2025-09-14T17:40:46.822Z&quot;,&quot;request_message&quot;:&quot;&quot;,&quot;status&quot;:&quot;success&quot;,&quot;seen_state&quot;:&quot;unseen&quot;},{&quot;chatItemType&quot;:&quot;exchange-pointer&quot;,&quot;exchangeUuid&quot;:&quot;7b76b055-4acf-4c68-a4df-b0c4c80e3c94&quot;,&quot;timestamp&quot;:&quot;2025-09-14T17:41:04.843Z&quot;,&quot;request_message&quot;:&quot;&quot;,&quot;status&quot;:&quot;success&quot;,&quot;seen_state&quot;:&quot;unseen&quot;},{&quot;request_id&quot;:&quot;0ee767b9-2840-4976-9d24-491eb8db881a&quot;,&quot;uuid&quot;:&quot;7c2ddcc3-97c0-4582-b8b4-383a610c921e&quot;,&quot;chatItemType&quot;:&quot;agentic-checkpoint-delimiter&quot;,&quot;status&quot;:&quot;success&quot;,&quot;fromTimestamp&quot;:0,&quot;toTimestamp&quot;:1757871683923,&quot;seen_state&quot;:&quot;unseen&quot;}],&quot;feedbackStates&quot;:{&quot;temp-fe-66ec6046-e24b-43d5-9782-5651f4c9b79d&quot;:{&quot;selectedRating&quot;:0,&quot;feedbackNote&quot;:&quot;&quot;},&quot;temp-fe-fe1dbe9e-ac36-4b78-be15-d2b32eabd9fd&quot;:{&quot;selectedRating&quot;:0,&quot;feedbackNote&quot;:&quot;&quot;},&quot;temp-fe-1c7f033e-8716-4d6c-a087-00bd55e2e8ab&quot;:{&quot;selectedRating&quot;:0,&quot;feedbackNote&quot;:&quot;&quot;},&quot;temp-fe-69baa721-036d-43b0-8cc6-05304593f36c&quot;:{&quot;selectedRating&quot;:0,&quot;feedbackNote&quot;:&quot;&quot;},&quot;temp-fe-c75942bf-396a-43a7-80c4-490c340da57c&quot;:{&quot;selectedRating&quot;:0,&quot;feedbackNote&quot;:&quot;&quot;},&quot;temp-fe-6e5f0e2a-e6dc-4473-82a2-9fc4724df7ca&quot;:{&quot;selectedRating&quot;:0,&quot;feedbackNote&quot;:&quot;&quot;},&quot;temp-fe-54c52b7f-7181-468b-b793-6d8a844a6fc1&quot;:{&quot;selectedRating&quot;:0,&quot;feedbackNote&quot;:&quot;&quot;},&quot;temp-fe-52bf1206-737b-4f0d-8663-fd24f900f74e&quot;:{&quot;selectedRating&quot;:0,&quot;feedbackNote&quot;:&quot;&quot;}},&quot;toolUseStates&quot;:{},&quot;draftExchange&quot;:{&quot;request_message&quot;:&quot;&quot;,&quot;rich_text_json_repr&quot;:{&quot;type&quot;:&quot;doc&quot;,&quot;content&quot;:[{&quot;type&quot;:&quot;paragraph&quot;}]},&quot;status&quot;:&quot;draft&quot;},&quot;selectedModelId&quot;:&quot;gpt5-responses-med-200k-v8-c4-p2-agent&quot;,&quot;requestIds&quot;:[],&quot;isPinned&quot;:false,&quot;isShareable&quot;:true,&quot;extraData&quot;:{&quot;hasDirtyEdits&quot;:true,&quot;isAgentConversation&quot;:true,&quot;baselineTimestamp&quot;:0},&quot;personaType&quot;:0}}}" />
      </map>
    </option>
  </component>
</project>